{"version":3,"file":"index.umd.min.js","sources":["../node_modules/js-cookie/src/js.cookie.js","../src/event-bus.ts","../src/cookie-manager.ts","../src/cookie-notification.ts","../src/cookie-preferences.ts","../src/service-loader.ts","../src/configuration-resolver.ts","../src/consent-revoke.ts","../src/haven.ts","../src/index.ts"],"sourcesContent":["/*!\n * JavaScript Cookie v2.2.0\n * https://github.com/js-cookie/js-cookie\n *\n * Copyright 2006, 2015 Klaus Hartl & Fagner Brack\n * Released under the MIT license\n */\n;(function (factory) {\n\tvar registeredInModuleLoader = false;\n\tif (typeof define === 'function' && define.amd) {\n\t\tdefine(factory);\n\t\tregisteredInModuleLoader = true;\n\t}\n\tif (typeof exports === 'object') {\n\t\tmodule.exports = factory();\n\t\tregisteredInModuleLoader = true;\n\t}\n\tif (!registeredInModuleLoader) {\n\t\tvar OldCookies = window.Cookies;\n\t\tvar api = window.Cookies = factory();\n\t\tapi.noConflict = function () {\n\t\t\twindow.Cookies = OldCookies;\n\t\t\treturn api;\n\t\t};\n\t}\n}(function () {\n\tfunction extend () {\n\t\tvar i = 0;\n\t\tvar result = {};\n\t\tfor (; i < arguments.length; i++) {\n\t\t\tvar attributes = arguments[ i ];\n\t\t\tfor (var key in attributes) {\n\t\t\t\tresult[key] = attributes[key];\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n\n\tfunction init (converter) {\n\t\tfunction api (key, value, attributes) {\n\t\t\tvar result;\n\t\t\tif (typeof document === 'undefined') {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Write\n\n\t\t\tif (arguments.length > 1) {\n\t\t\t\tattributes = extend({\n\t\t\t\t\tpath: '/'\n\t\t\t\t}, api.defaults, attributes);\n\n\t\t\t\tif (typeof attributes.expires === 'number') {\n\t\t\t\t\tvar expires = new Date();\n\t\t\t\t\texpires.setMilliseconds(expires.getMilliseconds() + attributes.expires * 864e+5);\n\t\t\t\t\tattributes.expires = expires;\n\t\t\t\t}\n\n\t\t\t\t// We're using \"expires\" because \"max-age\" is not supported by IE\n\t\t\t\tattributes.expires = attributes.expires ? attributes.expires.toUTCString() : '';\n\n\t\t\t\ttry {\n\t\t\t\t\tresult = JSON.stringify(value);\n\t\t\t\t\tif (/^[\\{\\[]/.test(result)) {\n\t\t\t\t\t\tvalue = result;\n\t\t\t\t\t}\n\t\t\t\t} catch (e) {}\n\n\t\t\t\tif (!converter.write) {\n\t\t\t\t\tvalue = encodeURIComponent(String(value))\n\t\t\t\t\t\t.replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g, decodeURIComponent);\n\t\t\t\t} else {\n\t\t\t\t\tvalue = converter.write(value, key);\n\t\t\t\t}\n\n\t\t\t\tkey = encodeURIComponent(String(key));\n\t\t\t\tkey = key.replace(/%(23|24|26|2B|5E|60|7C)/g, decodeURIComponent);\n\t\t\t\tkey = key.replace(/[\\(\\)]/g, escape);\n\n\t\t\t\tvar stringifiedAttributes = '';\n\n\t\t\t\tfor (var attributeName in attributes) {\n\t\t\t\t\tif (!attributes[attributeName]) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tstringifiedAttributes += '; ' + attributeName;\n\t\t\t\t\tif (attributes[attributeName] === true) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tstringifiedAttributes += '=' + attributes[attributeName];\n\t\t\t\t}\n\t\t\t\treturn (document.cookie = key + '=' + value + stringifiedAttributes);\n\t\t\t}\n\n\t\t\t// Read\n\n\t\t\tif (!key) {\n\t\t\t\tresult = {};\n\t\t\t}\n\n\t\t\t// To prevent the for loop in the first place assign an empty array\n\t\t\t// in case there are no cookies at all. Also prevents odd result when\n\t\t\t// calling \"get()\"\n\t\t\tvar cookies = document.cookie ? document.cookie.split('; ') : [];\n\t\t\tvar rdecode = /(%[0-9A-Z]{2})+/g;\n\t\t\tvar i = 0;\n\n\t\t\tfor (; i < cookies.length; i++) {\n\t\t\t\tvar parts = cookies[i].split('=');\n\t\t\t\tvar cookie = parts.slice(1).join('=');\n\n\t\t\t\tif (!this.json && cookie.charAt(0) === '\"') {\n\t\t\t\t\tcookie = cookie.slice(1, -1);\n\t\t\t\t}\n\n\t\t\t\ttry {\n\t\t\t\t\tvar name = parts[0].replace(rdecode, decodeURIComponent);\n\t\t\t\t\tcookie = converter.read ?\n\t\t\t\t\t\tconverter.read(cookie, name) : converter(cookie, name) ||\n\t\t\t\t\t\tcookie.replace(rdecode, decodeURIComponent);\n\n\t\t\t\t\tif (this.json) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tcookie = JSON.parse(cookie);\n\t\t\t\t\t\t} catch (e) {}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (key === name) {\n\t\t\t\t\t\tresult = cookie;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!key) {\n\t\t\t\t\t\tresult[name] = cookie;\n\t\t\t\t\t}\n\t\t\t\t} catch (e) {}\n\t\t\t}\n\n\t\t\treturn result;\n\t\t}\n\n\t\tapi.set = api;\n\t\tapi.get = function (key) {\n\t\t\treturn api.call(api, key);\n\t\t};\n\t\tapi.getJSON = function () {\n\t\t\treturn api.apply({\n\t\t\t\tjson: true\n\t\t\t}, [].slice.call(arguments));\n\t\t};\n\t\tapi.defaults = {};\n\n\t\tapi.remove = function (key, attributes) {\n\t\t\tapi(key, '', extend(attributes, {\n\t\t\t\texpires: -1\n\t\t\t}));\n\t\t};\n\n\t\tapi.withConverter = init;\n\n\t\treturn api;\n\t}\n\n\treturn init(function () {});\n}));\n","interface EventBusSubscriptions {\n  [name: string]: {\n    [id: number]: Function;\n  };\n}\n\nexport interface EventBusSubscription {\n  unsubscribe: Function;\n}\n\nclass EventBus {\n  private subscriptions: EventBusSubscriptions = {};\n  private counter: number = 0;\n\n  constructor() {\n    console.log('New EventBUS!');\n  }\n\n  /**\n   * Register a new callback\n   * @param event\n   * @param callback\n   */\n  on(event: string, callback: Function): EventBusSubscription {\n    const id = this.counter++;\n    if (this.subscriptions[event] === undefined) {\n      this.subscriptions[event] = {};\n    }\n\n    this.subscriptions[event][id] = callback;\n\n    return {\n      unsubscribe: () => {\n        delete this.subscriptions[event][id];\n      }\n    }\n  }\n\n  /**\n   * Emit a new event\n   * @param event\n   * @param payload\n   */\n  emit(event: string, payload?: any): void {\n    console.log(event);\n    if (this.subscriptions[event] === undefined) {\n      return;\n    }\n\n    for (const id of Object.keys(this.subscriptions[event])) {\n      console.log('Found', id);\n      this.subscriptions[event][id](payload);\n    }\n  }\n}\n\nexport default new EventBus();\n","import Cookies, { CookieAttributes } from 'js-cookie';\nimport { ConsentType, CookieManagerOptions } from '../types';\nimport EventBus from './event-bus';\n\nexport default class CookieManager {\n  /**\n   * Consent type: opt-in / opt-out.\n   */\n  protected type: ConsentType;\n\n  /**\n   * Optional cookie prefix\n   */\n  protected prefix: string | undefined;\n\n  /**\n   * Create CookieManager instance.\n   * @param prefix\n   * @param type\n   */\n  constructor({ prefix, type }: CookieManagerOptions = {}) {\n    this.type = type || 'opt-in';\n    this.prefix = prefix;\n  }\n\n  /**\n   * Get cookie by name.\n   * @param name\n   */\n  public static getCookie(name: string): string | undefined {\n    return Cookies.get(name);\n  }\n\n  /**\n   * Set cookie by name.\n   * @param name\n   * @param value\n   * @param options\n   */\n  public static setCookie(name: string, value: string, options?: CookieAttributes): void {\n    Cookies.set(name, value, options || {});\n  }\n\n  /**\n   * Remove cookie by name.\n   * @param name\n   */\n  public static removeCookie(name: string): void {\n    Cookies.remove(name);\n  }\n\n  /**\n   * Check whether cookie exists.\n   * @param name\n   */\n  public static cookieExists(name: string): boolean {\n    return Cookies.get(name) !== undefined && Cookies.get(name) !== '';\n  }\n\n  /**\n   * Enable the functional cookie.\n   */\n  public enableFunctionalCookie(): void {\n    CookieManager.setCookie(this.getPrefixedCookieName('functional'), 'true', { expires: 365 });\n    EventBus.emit('functional-enabled');\n  }\n\n  /**\n   * Disable (remove) functional cookie, resulting in new cookie consent request.\n   */\n  public disableFunctionalCookie(): void {\n    CookieManager.removeCookie(this.getPrefixedCookieName('functional'));\n  }\n\n  /**\n   * Check whether the functional cookie has been set.\n   */\n  public hasFunctionalCookie(): boolean {\n    return CookieManager.cookieExists(this.getPrefixedCookieName('functional'));\n  }\n\n  /**\n   * Enable analytics cookie.\n   */\n  public enableAnalyticsCookie(): void {\n    CookieManager.setCookie(this.getPrefixedCookieName('analytics'), 'true', { expires: 365 });\n    EventBus.emit('analytics-enabled');\n  }\n\n  /**\n   * Disable analytics cookie.\n   */\n  public disableAnalyticsCookie(): void {\n    CookieManager.setCookie(this.getPrefixedCookieName('analytics'), 'false', { expires: 365 });\n    EventBus.emit('analytics-disabled');\n  }\n\n  /**\n   * Check whether analytics cookies should be enabled.\n   */\n  public hasAnalyticsEnabled(): boolean {\n    const cookie = CookieManager.getCookie(this.getPrefixedCookieName('analytics'));\n\n    if (this.type === 'opt-in') {\n      return cookie === 'true';\n    }\n\n    return cookie === undefined || cookie === 'true';\n  }\n\n  /**\n   * Enable the marketing cookie.\n   */\n  public enableMarketingCookie(): void {\n    CookieManager.setCookie(this.getPrefixedCookieName('marketing'), 'true', { expires: 365 });\n    EventBus.emit('marketing-enabled');\n  }\n\n  /**\n   * Disable the marketing cookie.\n   */\n  public disableMarketingCookie(): void {\n    CookieManager.setCookie(this.getPrefixedCookieName('marketing'), 'false', { expires: 365 });\n    EventBus.emit('marketing-enabled');\n  }\n\n  /**\n   * Check whether marketing cookies should be enabled.\n   */\n  public hasMarketingEnabled(): boolean {\n    const cookie = CookieManager.getCookie(this.getPrefixedCookieName('marketing'));\n\n    if (this.type === 'opt-in') {\n      return cookie === 'true';\n    }\n\n    return cookie === undefined || cookie === 'true';\n  }\n\n  /**\n   * Accept all cookies.\n   */\n  public acceptAll(): void {\n    this.enableFunctionalCookie();\n    this.enableAnalyticsCookie();\n    this.enableMarketingCookie();\n  }\n\n  /**\n   * Get prefixed cookie name, if a prefix has been set by the user.\n   * @param name\n   */\n  protected getPrefixedCookieName(name: string): string {\n    if (this.prefix !== undefined) {\n      return `${this.prefix}-${name}`;\n    }\n\n    return name;\n  }\n}\n","import CookieManager from './cookie-manager';\nimport { Configuration } from '../types';\n\nexport default class CookieNotification {\n  /**\n   * Cookie manager instance.\n   */\n  protected cookieManager: CookieManager;\n  /**\n   * Wrapper element for the cookie notification.\n   */\n  protected cookieNotification: HTMLElement | null = null;\n  /**\n   * Button for accepting cookies.\n   */\n  protected cookiesAccept: HTMLElement | null = null;\n  /**\n   * Button for declining cookies.\n   */\n  protected cookiesDecline: HTMLElement | null = null;\n\n  /**\n   * Fetch DOM elements.\n   */\n  constructor(options: Configuration) {\n    this.cookieManager = new CookieManager(options);\n  }\n\n  /**\n   * Initialize cookie notification event listeners.\n   */\n  public init(): void {\n    this.cookieNotification = document.getElementById('cookie-notification');\n    this.cookiesAccept = document.getElementById('cookie-notification__accept');\n    this.cookiesDecline = document.getElementById('cookie-notification__decline');\n\n    if (this.cookieNotification !== null && !this.cookieManager.hasFunctionalCookie()) {\n      this.showCookieNotification();\n    }\n    if (this.cookiesAccept !== null) {\n      this.cookiesAccept.addEventListener('click', (event) => {\n        event.preventDefault();\n        this.cookieManager.acceptAll();\n        this.hideCookieNotification();\n      })\n    }\n    if (this.cookiesDecline !== null) {\n      this.cookiesDecline.addEventListener('click', (event) => {\n        event.preventDefault();\n        // Only set the functional cookie.\n        this.cookieManager.enableFunctionalCookie();\n        this.hideCookieNotification();\n      })\n    }\n  }\n\n  /**\n   * Show cookie notification.\n   */\n  public showCookieNotification(): void {\n    if (this.cookieNotification !== null) {\n      this.cookieNotification.style.display = 'block';\n    }\n  }\n\n  /**\n   * Hide cookie notification.\n   */\n  public hideCookieNotification(): void {\n    if (this.cookieNotification !== null) {\n      this.cookieNotification.style.display = 'none';\n    }\n  }\n}\n","import CookieManager from './cookie-manager';\nimport { Configuration } from '../types';\n\nexport default class CookiePreferences {\n  /**\n   * Cookie manager instance.\n   */\n  protected cookieManager: CookieManager;\n  /**\n   * Checkbox for accepting analytics cookies.\n   */\n  protected checkboxAnalytics: HTMLInputElement | null = null;\n  /**\n   * Checkbox for accepting marketing cookies.\n   */\n  protected checkboxMarketing: HTMLInputElement | null = null;\n  /**\n   * Button for saving preferences.\n   */\n  protected saveButton: HTMLButtonElement | null = null;\n  /**\n   * Initial save button text (e.g. `Save preferences`)\n   */\n  protected saveButtonInitialText: string = '';\n  /**\n   * Saved button text (e.g. `Saved`)\n   */\n  protected saveButtonSavedText: string = '';\n\n  /**\n   * Fetch DOM elements.\n   */\n  constructor(options: Configuration) {\n    this.cookieManager = new CookieManager(options);\n  }\n\n  /**\n   * Initialize cookie preferences initial states and event listeners.\n   */\n  public init(): void {\n    this.checkboxAnalytics = <HTMLInputElement>document.getElementById('cookie-preferences__analytics');\n    this.checkboxMarketing = <HTMLInputElement>document.getElementById('cookie-preferences__marketing');\n    this.saveButton = <HTMLButtonElement>document.getElementById('cookie-preferences__save');\n\n    // Set initial checked states\n    if (this.checkboxMarketing !== null) {\n      this.checkboxMarketing.checked = this.cookieManager.hasMarketingEnabled();\n      this.checkboxAnalytics.addEventListener('change', () => {\n        this.enableButton();\n      });\n    }\n    if (this.checkboxAnalytics !== null) {\n      this.checkboxAnalytics.checked = this.cookieManager.hasAnalyticsEnabled();\n      this.checkboxMarketing.addEventListener('change', () => {\n        this.enableButton();\n      });\n    }\n\n    if (this.saveButton !== null) {\n      this.saveButtonInitialText = this.saveButton.innerText;\n      this.saveButtonSavedText = this.saveButton.dataset.saved || 'Saved';\n      this.saveButton.addEventListener('click', () => {\n        this.disableButton();\n        this.cookieManager.enableFunctionalCookie();\n        if (this.checkboxMarketing && this.checkboxMarketing.checked) {\n          this.cookieManager.enableMarketingCookie();\n        } else {\n          this.cookieManager.disableMarketingCookie();\n        }\n        if (this.checkboxAnalytics && this.checkboxAnalytics.checked) {\n          this.cookieManager.enableAnalyticsCookie();\n        } else {\n          this.cookieManager.disableAnalyticsCookie();\n        }\n      })\n    }\n  }\n\n  /**\n   * Enable the submit button.\n   */\n  protected enableButton(): void {\n    this.saveButton!.disabled = false;\n    this.saveButton!.innerText = this.saveButtonInitialText;\n  }\n\n  /**\n   * Disable the submit button.\n   */\n  protected disableButton(): void {\n    this.saveButton!.disabled = true;\n    this.saveButton!.innerText = this.saveButtonSavedText;\n  }\n}\n","import { Configuration, CookieConsentServices } from '../types';\nimport CookieManager from './cookie-manager';\nimport EventBus from './event-bus';\n\nexport default class ServiceLoader {\n  protected services: CookieConsentServices;\n\n  constructor(options: Configuration) {\n    this.services = options.services || {};\n  }\n\n  /**\n   * Load all registered services.\n   */\n  public loadAnalyticsServices(): void {\n    if (this.services.gtm && this.services.gtm.id) {\n      this.loadGtm();\n    }\n    EventBus.emit('services-loaded');\n  }\n\n  /**\n   * Dynamically load GTM after consent was given.\n   */\n  protected loadGtm(): void {\n    // Don't load GTM twice.\n    if (this.hasLoadedGtm()) {\n      return;\n    }\n\n    window.dataLayer = window.dataLayer || [];\n    window.dataLayer.push({\n      'gtm.start': new Date().getTime(),\n      'event': 'gtm.js'\n    });\n    const firstScript = document.getElementsByTagName('script')[0];\n    const script = document.createElement('script');\n    script.src = `https://www.googletagmanager.com/gtm.js?id=${this.services.gtm!.id}`;\n    firstScript.parentNode!.insertBefore(script, firstScript);\n  }\n\n  /**\n   * Check if GTM instance has already been created.\n   */\n  protected hasLoadedGtm(): boolean {\n    const src = `https://www.googletagmanager.com/gtm.js?id=${this.services.gtm!.id}`;\n    return document.querySelector(`script[src=\"${src}\"`) !== null;\n  }\n}\n","import { Configuration, CookieConsentOptions } from '../types';\n\nexport default class ConfigurationResolver {\n  /**\n   * Resolve configuration using some default options.\n   * @param options\n   */\n  public static resolve(options: CookieConsentOptions): Configuration {\n    return Object.assign({\n      type: 'opt-in',\n      injectServices: true,\n    }, options)\n  }\n}\n","import CookieManager from './cookie-manager';\nimport { Configuration, CookieConsentServices } from '../types';\n\nexport default class ConsentRevoke {\n  protected services: CookieConsentServices;\n\n  constructor(options: Configuration) {\n    this.services = options.services || {};\n  }\n\n  /**\n   * Destroy all registered services after opt-out / consent revoke.\n   */\n  public destroyAnalyticsServices(): void {\n    console.log(this.services);\n    if (this.services.gtm && this.services.gtm.id) {\n      this.destroyGtm();\n    }\n    if (this.services.aam) {\n      this.destroyAam();\n    }\n    if (this.services.navitas) {\n      this.destroyNavitas();\n    }\n    console.log('Reloading page');\n    // window.location.reload();\n  }\n  /**\n   * Remove all cookies possibly set by GTM.\n   */\n  protected destroyGtm(): void {\n    CookieManager.removeCookie('_ga');\n    CookieManager.removeCookie('_gid');\n    CookieManager.removeCookie('_gat');\n    if (this.services.ga && this.services.ga.id) {\n      CookieManager.removeCookie(`_dc_gtm_${this.services.ga.id}`);\n      CookieManager.removeCookie(`_gac_${this.services.ga.id}`);\n      CookieManager.removeCookie(`_gat_gtag_${this.services.ga.id}`);\n      CookieManager.removeCookie(`_gat_${this.services.ga.id}`);\n    }\n  }\n\n  /**\n   * Remove all cookies set by Adobe Audience Manager.\n   */\n  protected destroyAam(): void {\n    CookieManager.removeCookie('aam_uuid');\n  }\n\n  /**\n   * Remove all cookies set by Navitas.\n   */\n  protected destroyNavitas(): void {\n    CookieManager.removeCookie('AAMC_navitas_0');\n    CookieManager.removeCookie('DST');\n    CookieManager.removeCookie('demdex');\n    CookieManager.removeCookie('dextp');\n    CookieManager.removeCookie('navitas');\n  }\n}\n","import CookieNotification from './cookie-notification';\nimport CookiePreferences from './cookie-preferences';\nimport CookieManager from './cookie-manager';\nimport ServiceLoader from './service-loader';\nimport { Configuration, CookieConsentOptions } from '../types';\nimport ConfigurationResolver from './configuration-resolver';\nimport EventBus, { EventBusSubscription } from './event-bus';\nimport ConsentRevoke from './consent-revoke';\n\ndeclare global {\n  interface Window {\n    dataLayer: any[];\n    ga: any;\n    Haven: typeof Haven;\n  }\n}\n\nexport default class Haven {\n  protected options: Configuration;\n  protected cookieNotification: CookieNotification;\n  protected cookiePreferences: CookiePreferences;\n  protected cookieManager: CookieManager;\n  protected serviceLoader: ServiceLoader;\n  /**\n   * Cookie consent revoke instance.\n   */\n  protected consentRevoke: ConsentRevoke;\n\n  constructor(options: CookieConsentOptions = {}) {\n    const config = ConfigurationResolver.resolve(options);\n    this.cookieNotification = new CookieNotification(config);\n    this.cookiePreferences = new CookiePreferences(config);\n    this.cookieManager = new CookieManager(config);\n    this.serviceLoader = new ServiceLoader(config);\n    this.consentRevoke = new ConsentRevoke(config);\n    this.options = config;\n  }\n\n  public init(): void {\n    document.addEventListener('DOMContentLoaded', () => {\n      this.cookieNotification.init();\n      this.cookiePreferences.init();\n    });\n    this.registerDefaultListeners();\n    this.checkInitialState();\n  }\n\n  protected checkInitialState(): void {\n    if (this.cookieManager.hasFunctionalCookie()) {\n      EventBus.emit('functional-enabled');\n    }\n    if (this.cookieManager.hasAnalyticsEnabled()) {\n      EventBus.emit('analytics-enabled');\n    }\n    if (this.cookieManager.hasMarketingEnabled()) {\n      EventBus.emit('marketing-enabled');\n    }\n  }\n\n  protected registerDefaultListeners(): void {\n    // Inject analytics services once analytics cookies have been accepted\n    EventBus.on('analytics-enabled', () => {\n      console.log('Injecting services...');\n      if (this.options.injectServices) {\n        this.serviceLoader.loadAnalyticsServices();\n      }\n    });\n    // Remove analytics cookies when analytics cookie consent is revoked\n    EventBus.on('analytics-disabled', () => {\n      console.log('Destroying services...');\n      this.consentRevoke.destroyAnalyticsServices();\n    });\n  }\n\n  /**\n   * Proxy event bus subscription method to the event bus singleton so that users can call this method\n   * anywhere in their application.\n   * @param event\n   * @param callback\n   */\n  public static on(event: string, callback: Function): EventBusSubscription {\n    return EventBus.on(event, callback);\n  }\n\n  public static create(options: CookieConsentOptions = {}): Haven {\n    const haven = new Haven(options);\n    haven.init();\n    return haven;\n  }\n}\n","import CookieManager from './cookie-manager';\nimport CookieNotification from './cookie-notification';\nimport CookiePreferences from './cookie-preferences';\nimport Haven from './haven';\n\nexport { CookieManager, CookieNotification, CookiePreferences, Haven };\n\nwindow.Haven = Haven;\n\nexport default Haven;\n"],"names":["factory","extend","i","result","arguments","length","attributes","key","init","converter","api","value","document","path","defaults","expires","Date","setMilliseconds","getMilliseconds","toUTCString","JSON","stringify","test","e","write","encodeURIComponent","String","replace","decodeURIComponent","escape","stringifiedAttributes","attributeName","cookie","cookies","split","rdecode","parts","slice","join","this","json","charAt","name","read","parse","set","get","call","getJSON","apply","remove","withConverter","module","console","log","EventBus","event","callback","id","counter","undefined","subscriptions","unsubscribe","_this","payload","_a","Object","keys","_i","_b","prefix","type","CookieManager","Cookies","options","setCookie","getPrefixedCookieName","emit","removeCookie","cookieExists","getCookie","enableFunctionalCookie","enableAnalyticsCookie","enableMarketingCookie","cookieManager","CookieNotification","cookieNotification","getElementById","cookiesAccept","cookiesDecline","hasFunctionalCookie","showCookieNotification","addEventListener","preventDefault","acceptAll","hideCookieNotification","style","display","CookiePreferences","checkboxAnalytics","checkboxMarketing","saveButton","checked","hasMarketingEnabled","enableButton","hasAnalyticsEnabled","saveButtonInitialText","innerText","saveButtonSavedText","dataset","saved","disableButton","disableMarketingCookie","disableAnalyticsCookie","disabled","services","ServiceLoader","gtm","loadGtm","hasLoadedGtm","window","dataLayer","push","getTime","firstScript","getElementsByTagName","script","createElement","src","parentNode","insertBefore","querySelector","ConfigurationResolver","assign","injectServices","ConsentRevoke","destroyGtm","aam","destroyAam","navitas","destroyNavitas","ga","config","resolve","cookiePreferences","serviceLoader","consentRevoke","Haven","registerDefaultListeners","checkInitialState","on","loadAnalyticsServices","destroyAnalyticsServices","haven"],"mappings":"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"}